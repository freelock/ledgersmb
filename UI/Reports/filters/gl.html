<?lsmb INCLUDE 'ui-header.html' 
       	include_script = ["UI/ajax/scriptaculous/lib/prototype.js","UI/ajax/scriptaculous/src/scriptaculous.js?load=builder,effects,dragdrop,controls","UI/ajax/helpers.js"]
?>
<?lsmb PROCESS 'elements.html' ?>
<body>

<form method="get" action="journal.pl">
<?lsmb PROCESS input element_data = {
    type = "hidden"
    name = "sort"
    value = "transdate"
} ?>

<table width="100%">
  <tr>
    <th class="listtop"><?lsmb text('General Ledger Reports') ?></th>

  </tr>
  <tr height="5"></tr>
  <tr>
    <td>
      <table>
	<tr>
	  <th align="right"><?lsmb text('Reference') ?></th>
	  <td><?lsmb PROCESS input element_data = {
                  name = "reference"
                  size = "20"
                  type = "text"
                } ?></td>
        </tr>
         <tr>
          <th align="right"><?lsmb text('Account') ?></th>
          <td colspan="3">
              <?lsmb PROCESS ajaxselect element_data = {
                     name = "accno"
                     initial_value = ""
                     text_attr = 'accno'
                     value_attr = 'id'
                     ajax_target = 'journal.pl'
              } ?> </td>
	  </tr>
	  <tr>
	  <th align="right"><?lsmb text('Source') ?></th>
	  <td><?lsmb PROCESS input element_data = {
                     name = 'source'
                     type = 'text'
                     size = 20 } ?></td>
	  <th align="right"><?lsmb text('Memo') ?></th>
	  <td><?lsmb PROCESS input element_data = {
                     name="memo" 
                     size="20"
                     type="text"
              } ?></td>
	</tr>
	
	<tr>

	  <th align="right"><?lsmb text('Description') ?></th>
	  <td colspan="5"><?lsmb PROCESS input element_data = {
                                name='description' 
                                size='60'
                                type='text' } ?></td>
	</tr>
	<tr>
	  <th align="right"><?lsmb text('Notes') ?></th>
	  <td colspan="5"><?lsmb PROCESS input element_data = {
                              name='notes' 
                              size='60'
                              type='text' } ?></td>
	</tr>
        <?lsmb FOREACH BUC IN bu_classes ?>
        <tr>
          <th align="right"><?lsmb text(BUC.label) ?></th>
          <?lsmb b_units.${BUC.id}.unshift({}) ?>
          <td><?lsmb PROCESS select element_data = {
                   name = 'business_unit_' _ loop.count
                options = b_units.${BUC.id}
              text_attr = 'text'
             value_attr = 'id'
                  class = 'business_unit'
              } ?></td>
        </tr>
        <?lsmb END; # FOREACH BUC
        PROCESS input element_data = {
             type = 'hidden'
             name = 'bc_count'
             value = bu_classes.size
        } ?>
	<tr>

	  <th align="right"><?lsmb text('From') ?></th>
	  <td><?lsmb PROCESS input element_data = {
               class="date" 
               name="date_from" 
               size="11" 
               title=datestyle } ?></td>
	  <th align="right"><?lsmb text('To') ?></th>
	  <td><?lsmb PROCESS input element_data = {
                 class="date" 
                 name="date_to" 
                 size="11" 
                 title=datestyle } ?></td>
	</tr>
	
        <tr>
	<th align="right"><?lsmb text('Period') ?></th>

	<td colspan="5">
        <?lsmb PROCESS select element_data = {
               name = "month"
               options = accountingmonths
               text_attr = "month"
               value_attr = "id"
        } ?>

	<?lsmb PROCESS select element_data = {
               name="year"
               options = all_years
               text_attr = "year"
               value_attr = "year"
        } ?>
	<?lsmb PROCESS input element_data = {
               name="interval"
               class="radio"
               type="radio"
               value="0" 
               checked="checked" } ?>&nbsp;<?lsmb text('Current') ?>
	<?lsmb PROCESS input element_data = { 
               name="interval" 
               class="radio" 
               type="radio" 
               value="1" } ?>&nbsp;<?lsmb text('Month') ?>
	<?lsmb PROCESS input element_data = {
               name="interval"
               class="radio"
               type="radio"
               value="3" } ?>&nbsp;<?lsmb text('Quarter') ?>
	<input name=interval class=radio type=radio value=12>&nbsp;Year
	</td>
      </tr>

	<tr>

	  <th align="right"><?lsmb text('Amount') ?> &gt;=</th>
	  <td><?lsmb PROCESS input element_data = {
                     name="amountfrom" 
                     size="11"
                     type="text"
               } ?></td>
	  <th align="right">Amount &lt;=</th>
	  <td><?lsmb PROCESS input element_data = {
                     name="amountto" 
                     size="11"
                     type="text" 
              } ?></td>
	</tr>
	<tr>
	  <th align="right"><?lsmb text('Include in Report') ?></th>

	  <td colspan="5">
	    <table>
	      <tr>
		<td>
		  <?lsmb PROCESS input element_data = {
                          name="category" 
                          class="radio" 
                          type="radio" 
                          value="X" 
                          checked = "checked"
                   } ?>&nbsp;<?lsmb text('All') ?>
		  <?lsmb PROCESS input element_data = {
                          name="category" 
                          class="radio"
                          type="radio" 
                          value="A"
                   } ?>&nbsp;<?lsmb text('Asset') ?>
		  <?lsmb PROCESS input element_data = { 
                          name="category" 
                          class="radio" 
                          type="radio" 
                          value="L"
                   } ?>&nbsp;<?lsmb text('Liability') ?>
		  <?lsmb PROCESS input element_data = {
                         name="category" 
                         class="radio"
                         type="radio" 
                         value="Q"
                  } ?>&nbsp;<?lsmb text('Equity') ?>
		  <?lsmb PROCESS input element_data = {
                         name="category"
                         class="radio" 
                         type="radio" 
                         value="I"
                    } ?>&nbsp;<?lsmb text('Income') ?>
		  <?lsmb PROCESS input element_data = {
                         name="category" 
                         class="radio" 
                         type="radio" 
                         value="E"
                    } ?>&nbsp;<?lsmb text('Expense') ?>
		</td>
	      </tr>

	      <tr>
		<table>
                    <tr>
                      <td nowrap><?lsmb PROCESS input element_data = {
                                        name="col_id" 
                                        class="checkbox" 
                                        type="checkbox" 
                                        value="Y"
                                 } ?> <?lsmb text('ID') ?></td>
                      <td nowrap><?lsmb PROCESS input element_data = {
                                        name="col_transdate" 
                                        class="checkbox" 
                                        type="checkbox" 
                                        value="Y" 
                                        checked="checked"
                                  } ?> <?lsmb text('Date') ?></td>
                     <td nowrap><?lsmb PROCESS input element_data = {
                                       name="col_reference" 
                                       class="checkbox" 
                                       type="checkbox" 
                                       value="Y" 
                                       checked="checked"
                                } ?> <?lsmb text('Reference') ?></td>
                     <td nowrap><?lsmb PROCESS input element_data = {
                                       name="col_description" 
                                       class="checkbox" 
                                       type="checkbox" 
                                       value="Y" 
                                       checked="checked"
                                 } ?> <?lsmb text('Description') ?></td>

                  </tr>
                  <tr>
                    <td nowrap><?lsmb PROCESS input element_data = { 
                                      name="col_debits" 
                                      class="checkbox" 
                                      type="checkbox" 
                                      value="Y" 
                                      checked="checked"
                               } ?> <?lsmb text('Debit') ?></td>
                    <td nowrap><?lsmb PROCESS input element_data = {
                                      name="col_credits" 
                                      class="checkbox" 
                                      type="checkbox" 
                                      value="Y" 
                                      checked="checked" 
                                } ?> <?lsmb text('Credit') ?></td>
                   <td nowrap><?lsmb PROCESS input element_data = {
                                     name="col_source" 
                                     class="checkbox" 
                                     type="checkbox" 
                                     value="Y" 
                                     checked="checked"
                                } ?> <?lsmb text('Source') ?></td>
                   <td nowrap><?lsmb PROCESS input element_data = {
                                     name="col_memo" 
                                     class="checkbox" 
                                     type="checkbox" 
                                     value="Y"
                              } ?> <?lsmb text('Memo') ?></td>
                   <td nowrap><?lsmb PROCESS input element_data = {
                                     name="col_cleared" 
                                     class="checkbox" 
                                     type="checkbox" 
                                     value="Y"
                              } ?> <?lsmb text('Cleared') ?></td>
                  </tr>
                  <tr>
                   <td nowrap><?lsmb PROCESS input element_data = {
                                     name="col_till" 
                                     class="checkbox" 
                                     type="checkbox" 
                                     value="Y" 
                             } ?> <?lsmb text('Till') ?></td>
                   <td nowrap><?lsmb PROCESS input element_data = {
                                     name="col_accno" 
                                     class="checkbox" 
                                     type="checkbox" 
                                     value="Y" 
                                     checked="checked"
                             } ?> <?lsmb text('Account') ?></td>
                   <td nowrap><?lsmb PROCESS input element_data = {
                                     name="col_gifi_accno" 
                                     class="checkbox" 
                                     type="checkbox" 
                                     value="Y" 
                             } ?> <?lsmb text('GIFI') ?></td>
                   <td nowrap><?lsmb PROCESS input element_data = {
                                     name="col_accname" 
                                     class="checkbox" 
                                     type="checkbox" 
                                     value="Y" 
                             } ?> <?lsmb text('Account Name') ?></td>
		    <td nowrap><?lsmb PROCESS input element_data = {
                                      name="col_balance" 
                                      class="checkbox" 
                                      type="checkbox" 
                                      value="Y" 
                                } ?> <?lsmb text('Balance') ?></td>
                 </tr>
                 <tr>
		    <td nowrap><?lsmb PROCESS input element_data = {
                                      name="show_subtotal" 
                                      class="checkbox" 
                                      type="checkbox" 
                                      value="Y"
                                } ?> <?lsmb text('Subtotal') ?></td>
                  </tr>
		</table>
	      </tr>
	    </table>
	</tr>

      </table>
    </td>
  </tr>
  <tr>
    <td><hr size=3 noshade></td>
  </tr>
</table>

<?lsmb PROCESS input element_data = {
       type="hidden" 
       name="path" 
       value=path
} ?>
<?lsmb PROCESS input element_data = { 
       type="hidden" 
       name="login" 
       value=login
} ?>

<br>
<?lsmb PROCESS button element_data = {
       text = text('Continue')
       class="submit" 
       type="submit" 
       name="action" 
       value="search"
} ?>
</form>


</body>
</html>

