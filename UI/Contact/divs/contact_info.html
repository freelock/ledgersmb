<div class="container" id="contact_div">
<div class="listtop"><?lsmb text('Contact Information') ?></div>
<?lsmb 

FOREACH row IN contacts;
    row.edit = '[' _ text('Edit') _ ']';
    row.delete = '[' _ text('Delete') _ ']';
    row.edit_href_suffix = 
               tt_url(script) _ '?entity_id=' _ entity_id _ '&contact=' _
               tt_url(row.contact) _ '&contact_class=' _ row.contact _
               '&contact_class=' _ row.class_id _ '&description=' _
               tt_url(row.description) _ '&credit_id=' _ credit_id _
               '&action=edit&target_div=contact_div';
    row.delete_href_suffix = 
               tt_url(script) _ '?entity_id=' _ entity_id _ '&contact=' _
               tt_url(row.contact) _ '&contact_class=' _ row.contact _
               '&contact_class=' _ row.class_id _ '&description=' _
               tt_url(row.description) _ '&credit_id=' _ credit_id _
               '&action=delete_contact&target_div=contact_div';
END;
PROCESS dynatable 
        attributes = {id = 'contact-list' }
        tbody = {rows = contacts}
        columns = [
         {col_id='class_name', type='text' name=text('Type') },
         {col_id='description', type='text', name=text('Description') },
         {col_id='contact', type='text', name=text('Contact Info') } #'
         {col_id='edit', type='href', href_base='', name='' }
         {col_id='delete', type='href', href_base='', name='' }
        ] ?>
	<form action="<?lsmb script ?>">
<?lsmb PROCESS input element_data = {
		type = "hidden"
		name = "form_id"
		value = form_id
	} ?>
<?lsmb PROCESS input element_data = {
		type = "hidden"
		name = "target_div"
		value = 'contact_div'
	} ?>
	<?lsmb PROCESS input element_data = {
		type="hidden" 
		name="entity_id" 
		value=entity_id
	} ?>
	<?lsmb PROCESS input element_data = {
		type="hidden" 
		name="credit_id" 
		value=credit_id
	} ?>
	<?lsmb PROCESS input element_data = {
		type="hidden" 
		name="old_contact_class" 
		value=contact_class
	} ?>
	<?lsmb PROCESS input element_data = {
		type="hidden" 
		name="old_contact" 
		value=contact
	} ?>
	<?lsmb PROCESS input element_data = {
		type="hidden" 
		name="contact_id" 
		value=contact_id
	} ?>
	<div>
		<?lsmb PROCESS select element_data = {
			name = "class_id"
			label = "Type"
			text_attr = "class"
			value_attr = "id"
			default_values = [contact_class]		
			options = contact_class_list
		} ?>
	</div>
	<div>
		<?lsmb PROCESS input element_data = {
			label = text('Description'),
			name = "description"
			value = description
			type = "text"
			size = "20"
		} #' ?>
	</div>
	<div>
		<?lsmb PROCESS input element_data = {
			label = text('Contact Info'),
			name = "contact"
			value = contact
			type = "text"
			size = "20"
		} #' ?>
	</div>
	<div><?lsmb PROCESS button element_data = {
		name = "action",
		value = "save_contact",
		text =  text('Save Contact'),
		class = "submit"
		} #' ?>
	<?lsmb IF contact.defined ?> 
	<?lsmb PROCESS button element_data = {
		name = "action",
		value = "save_contact_new",
		text =  text('Save As New'),
		class = "submit"
		} #' ?>
 	<?lsmb END # IF old_contact.defined ?>
	</div>
</form>
	
</div>
